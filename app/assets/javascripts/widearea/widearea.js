(function(g,b){"object"===typeof exports?b(exports):"function"===typeof define&&define.amd?define(["exports"],b):b(g)})(this,function(g){function b(a){this._targetElement=a;this._options={wideAreaAttr:"data-widearea",exitOnEsc:!0,defaultColorScheme:"light",closeIconLabel:"Close WideArea",changeThemeIconLabel:"Toggle Color Scheme",fullScreenIconLabel:"WideArea Mode"};var f=this;a=this._targetElement.querySelectorAll("textarea["+this._options.wideAreaAttr+"='enable']");for(var c=function(){m.call(f,
this)},d=a.length-1;0<=d;d--){var e=a[d],h=document.createElement("div"),j=document.createElement("div"),b=document.createElement("a");h.className="widearea-wrapper";j.className="widearea-icons";b.className="widearea-icon fullscreen";b.title=this._options.fullScreenIconLabel;b.href="javascript:void(0);";b.onclick=c;var g=e.cloneNode();g.value=e.value;h.appendChild(g);j.appendChild(b);h.appendChild(j);e.parentNode.replaceChild(h,e)}}function m(a){var f=this;a=a.parentNode.parentNode.querySelector("textarea");
var c=a.cloneNode();c.className=("widearea-fullscreen "+a.className).trim();a.className=("widearea-fullscreened "+a.className).trim();var d=document.createElement("div");d.className="widearea-controlPanel";var e=document.createElement("a");e.href="javascript:void(0);";e.className="widearea-icon close";e.title=this._options.closeIconLabel;e.onclick=function(){l.call(f)};var b=document.createElement("a");b.href="javascript:void(0);";b.className="widearea-icon changeTheme";b.title=this._options.changeThemeIconLabel;
b.onclick=function(){n.call(f)};d.appendChild(e);d.appendChild(b);e=document.createElement("div");e.className="widearea-overlayLayer "+this._options.defaultColorScheme;e.appendChild(c);e.appendChild(d);document.body.appendChild(e);c.focus();c.value=a.value;this._onKeyDown=function(a){27===a.keyCode&&f._options.exitOnEsc&&l.call(f);9==a.keyCode&&(a.preventDefault(),a=c.selectionStart,c.value=c.value.substring(0,a)+"\t"+c.value.substring(c.selectionEnd),c.selectionEnd=a+1)};window.addEventListener?
window.addEventListener("keydown",f._onKeyDown,!0):document.attachEvent&&document.attachEvent("onkeydown",f._onKeyDown)}function n(){var a=document.querySelector(".widearea-overlayLayer");a.className=/dark/gi.test(a.className)?a.className.replace("dark","light"):a.className.replace("light","dark")}function l(){var a=document.querySelector("textarea.widearea-fullscreened"),b=document.querySelector(".widearea-overlayLayer"),c=b.querySelector("textarea");a.focus();a.value=c.value;a.className=a.className.replace("widearea-fullscreened ",
"");b.parentNode.removeChild(b);window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown)}var k=function(a){if("string"===typeof a){if(a=document.querySelector(a))return new b(a);throw Error("There is no element with given selector.");}return new b(document.body)};k.version="0.1.1";k.fn=b.prototype={clone:function(){return new b(this)},setOption:function(a,b){this._options[a]=b;return this},setOptions:function(a){var b=
this._options,c={},d;for(d in b)c[d]=b[d];for(d in a)c[d]=a[d];this._options=c;return this}};return g.wideArea=k});
