- full_size = true unless full_size == false
- truncate = true unless truncate == false
- read_more = true unless read_more == false
.story.card.shadow-sm.mt-0{class: (if @stories; "mx-3 mb-3 mt-0"; elsif @children && !full_size; "col-md-4 p-0 mb-3 mb-md-0 shadow-sm"; end), id: "story_#{story.id}"}
  .card-header.bg-light
    %h2.mt-1{class: (full_size ? "h3" : "h6")}
      = link_to story.safe_title, story_url(story), class: "text-info"
      %small.text-muted
        by
        = link_to story.user.login, profile_path(story.user), class: "text-secondary"

  .card-body.p-3
    - if truncate
      .mb-3{style: "max-height: 25vh; overflow: scroll"}
        = simple_format(sanitize(story.truncated_description))
      - if read_more
        = link_to story_url(story), class: "btn btn-success btn-mini" do
          %span Read more 
          %i.icon-circle-arrow-right
    - else
      .row-fluid.story-itself
        .span10.offset1
          = simple_format(sanitize(story.description))
  - unless @parent
    %div{class: ("card-footer")}
      %span.comments_in_footer
        / = link_to pluralize(story.comments_count, 'remark'), story_url(story, :anchor => "comments")
        = link_to raw(story.comments_count.to_s + " <i class='icon-comment'></i>"), story_url(story, :anchor => "comments_section"), class: "text-dark", rel: "tooltip", title: "#{story.comments_count.to_s} comments"

      - unless @stories || @parent
        %span &nbsp;|&nbsp;
        %span.favorites_in_footer
          = render partial: "votes/story_vote", locals: {story: story }
      %span &nbsp;|&nbsp;
      %span.counter_in_footer
        / = pluralize(story.counter, 'view')
        = story.counter
        %i.icon-user
      %span &nbsp;|&nbsp;
      %span
        = time_ago_in_words(story.created_at) + " ago"
      - unless @stories || @children
        - if is_user
          %span &nbsp;|&nbsp;
          %span.flag
            / This is how people flag stories
            = link_to flag_story_url(story.id), :method => "post", rel: "tooltip", title: "Flag this as hateful" do
              %i.icon-flag

          - if is_owner_or_admin
            &nbsp;||&nbsp;
            = link_to edit_story_path(@story) do
              %i.icon-edit
              Edit
          - if is_admin
            &nbsp;|&nbsp;
            = @story.flagged
            %i.icon-flag