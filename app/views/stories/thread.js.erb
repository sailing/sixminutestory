$("<%= escape_javascript(render partial: 'stories/story', collection: @stories, locals: {truncate: false}) %>").appendTo("#stories");

var new_story = document.getElementById("story_<%= @stories.first.id %>");
new_story.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });


var href = $("#load_more_in_thread").attr('href');
var url = new URL(href);
var query_string = url.search;
var search_params = new URLSearchParams(query_string); 
// new value of "id" is set to "101"
var page = search_params.get('page');
page++;
search_params.set('page', page);

// change the search property of the main url
url.search = search_params.toString();

if(<%= @stories.last.id %> === <%= @story.id %>) {
  $("#load_more_in_thread").addClass('d-none');
  $("#no_more_stories").addClass('d-block');
} else {
  $("#load_more_in_thread").attr('href', url);
}
